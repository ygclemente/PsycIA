<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Medita√ß√£o</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link rel="stylesheet" href="../css/meditacao.css">
    <link rel="stylesheet" href="../css/styles.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
 <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

</head>
<body>
<header>
  <button onclick="toggleDarkMode()" class="modo-btn" id="darkModeBtn">
    <i class="fa-regular fa-moon"></i>
  </button>
  <div class="logo">
   <a href="../index.html"> <img src="../img/logo.png" alt="Logo" style="height: 85px;" /></a>
    </div>
  </div>
  <nav>
    <ul>
      <li><a href="../index.html">In√≠cio</a></li>
        <li><a href="../html/sobre.html">Sobre</a></li>
        <li><a href="#" id="abrirPerfilLink" onclick="abrirPerfil()"><i class="fa-solid fa-user"></i></a></li>
    </ul>
  </nav>
</header>
<main>
  <h1>Momento de Medita√ß√£o</h1>

  <!-- Sele√ß√£o de tipo e tempo -->
  <div class="selecao">
    <label for="tipoMeditacao">Tipo:</label>
    <select id="tipoMeditacao">
      <option value="rapida">R√°pida</option>
      <option value="guiada">Guiada</option>
      <option value="ansiedade">Para Ansiedade</option>
    </select>

    <label for="tempoMeditacao">Tempo:</label>
    <select id="tempoMeditacao">
      <option value="60">1 minuto</option>
      <option value="180" selected>3 minutos</option>
      <option value="300">5 minutos</option>
    </select>
  </div>

  <!-- Timer Circular -->
  <div class="timer-container">
    <svg width="180" height="180" viewBox="0 0 180 180">
      <circle class="timer-bg" r="80" cx="90" cy="90"></circle>
      <circle class="timer-progress" r="80" cx="90" cy="90"></circle>
    </svg>
    <div class="timer-text" id="cronometro">03:00</div>
  </div>

  <p class="orientacao">Relaxe seus ombros, mand√≠bula e testa...</p>
  <p class="incentivo">Voc√™ merece este momento!!!</p>

  <button id="btnIniciar">Iniciar Medita√ß√£o</button>
  <button id="btnParar" style="display:none;">Parar</button>
</main>

<!-- Painel Passos -->
<div id="painelPassos">
  <button class="fechar-painel" onclick="fecharPainelPassos()">&times;</button>
  <h3 id="tituloPassos">Passos da Medita√ß√£o</h3>
  <div id="passoAtual"></div>
  <div class="passo-controls">
    <button onclick="passoAnterior()" id="btnAnterior">Anterior</button>
    <span id="indicadorPasso"></span>
    <button onclick="proximoPasso()" id="btnProximo">Pr√≥ximo</button>
  </div>
</div>

<!-- Modal de Perfil -->
<div id="modalPerfil" class="modal-perfil">
  <div class="modal-content">
    <button class="fechar-modal" onclick="fecharPerfil()">‚úñ</button>
    <h2>Meu Perfil</h2>
    <p>Acompanhe seu bem-estar e progresso emocional.</p>
    <button onclick="alert('Minha conta est√° em desenvolvimento!')">Minha Conta [BETA]</button>
    <button onclick="fecharPerfil()">Fechar</button>
  </div>
</div>

<script>
// Modo escuro
function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  localStorage.setItem('modoNoturno', document.body.classList.contains('dark-mode') ? 'ativo' : 'inativo');
}
if (localStorage.getItem('modoNoturno') === 'ativo') document.body.classList.add('dark-mode');

// Tipos de medita√ß√£o e passos
const tiposMeditacao = {
  rapida: [
    "Sente-se confortavelmente.",
    "Feche os olhos e respire fundo.",
    "Concentre-se na sua respira√ß√£o por um minuto.",
    "Agrade√ßa a si mesmo por este momento."
  ],
  guiada: [
    "Sente-se com a coluna ereta.",
    "Inspire contando at√© 4, expire contando at√© 6.",
    "Observe os pensamentos sem julg√°-los.",
    "Sinta seu corpo relaxar a cada expira√ß√£o."
  ],
  ansiedade: [
    "Coloque a m√£o no peito e sinta o batimento.",
    "Respire profundamente 3 vezes.",
    "Repita mentalmente: 'Estou seguro neste momento'.",
    "Permita-se relaxar aos poucos."
  ]
};

let tipoAtual = 'rapida';
let passosAtuais = tiposMeditacao[tipoAtual];
let passoIndex = 0;

// Timer
let tempo = parseInt(document.getElementById("tempoMeditacao").value);
let tempoTotal = tempo;
let intervalo = null;
const cronometro = document.getElementById("cronometro");
const btnIniciar = document.getElementById("btnIniciar");
const btnParar = document.getElementById("btnParar");
const timerProgress = document.querySelector('.timer-progress');

function atualizarCronometro() {
  const min = String(Math.floor(tempo / 60)).padStart(2, '0');
  const seg = String(tempo % 60).padStart(2, '0');
  cronometro.textContent = `${min}:${seg}`;
  // Atualiza c√≠rculo
  const dasharray = 502.65;
  timerProgress.style.strokeDasharray = dasharray;
  timerProgress.style.strokeDashoffset = dasharray * (1 - tempo / tempoTotal);
}

// Atualiza tempo ao trocar select
document.getElementById("tempoMeditacao").addEventListener("change", function() {
  tempo = parseInt(this.value);
  tempoTotal = tempo;
  atualizarCronometro();
});

// Atualiza tipo ao trocar select
document.getElementById("tipoMeditacao").addEventListener("change", function() {
  tipoAtual = this.value;
  passosAtuais = tiposMeditacao[tipoAtual];
});

atualizarCronometro();

btnIniciar.onclick = function() {
  // Atualiza tipo e tempo ao iniciar
  tipoAtual = document.getElementById("tipoMeditacao").value;
  passosAtuais = tiposMeditacao[tipoAtual];
  passoIndex = 0;
  
  tempo = parseInt(document.getElementById("tempoMeditacao").value);
  tempoTotal = tempo;
  
  atualizarCronometro();
  
  document.querySelector(".orientacao").textContent = "Respire fundo... Sinta o ar entrando e saindo.";
  document.querySelector(".incentivo").textContent = "Aproveite cada segundo para relaxar.";
  
  btnIniciar.style.display = "none";
  btnParar.style.display = "inline-block";
  
  mostrarPainelPassos();
  
  intervalo = setInterval(() => {
    if (tempo > 0) {
      tempo--;
      atualizarCronometro();
    } else {
      clearInterval(intervalo);
      document.querySelector(".orientacao").textContent = "Voc√™ completou a medita√ß√£o.";
      document.querySelector(".incentivo").textContent = "üïäÔ∏è Sinta-se orgulhoso(a) de cuidar de si.";
      btnParar.style.display = "none";
      btnIniciar.style.display = "inline-block";
    }
  }, 1000);
};

btnParar.onclick = pararMeditacao;

function pararMeditacao() {
  clearInterval(intervalo);
  tempo = parseInt(document.getElementById("tempoMeditacao").value);
  tempoTotal = tempo;
  atualizarCronometro();
  
  document.querySelector(".orientacao").textContent = "Relaxe seus ombros, mand√≠bula e testa...";
  document.querySelector(".incentivo").textContent = "üíô Voc√™ merece este momento";
  
  btnIniciar.style.display = "inline-block";
  btnParar.style.display = "none";
}

// Painel de passos
function mostrarPainelPassos() {
  document.getElementById('painelPassos').style.display = 'block';
  document.getElementById('tituloPassos').textContent =
    'Passos da Medita√ß√£o - ' + document.querySelector('#tipoMeditacao option:checked').textContent;
    
  passoIndex = 0;
  atualizarPasso();
}
function fecharPainelPassos() {
  document.getElementById('painelPassos').style.display = 'none';
}
function atualizarPasso() {
  document.getElementById('passoAtual').textContent = passosAtuais[passoIndex];
  document.getElementById('indicadorPasso').textContent =
    `Passo ${passoIndex + 1} de ${passosAtuais.length}`;
    
  document.getElementById('btnAnterior').disabled = passoIndex === 0;
  document.getElementById('btnProximo').disabled = passoIndex === passosAtuais.length -1;
}
function proximoPasso() {
  if (passoIndex < passosAtuais.length -1) {
    passoIndex++;
    atualizarPasso();
  }
}
function passoAnterior() {
  if (passoIndex > 0) {
    passoIndex--;
    atualizarPasso();
  }
}

// Modal perfil
function abrirPerfil() { document.getElementById("modalPerfil").style.display = "flex"; }
function fecharPerfil() { document.getElementById("modalPerfil").style.display = "none"; }
</script>

</body>
</html>