<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Exerc√≠cio de Respira√ß√£o</title>
  
  <link rel="stylesheet" href="../css/respiracao.css">
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

</head>
<body>
  <header>
    <button onclick="toggleDarkMode()" class="modo-btn" id="darkModeBtn">
      <i class="fa-regular fa-moon"></i>
    </button>

    <div class="logo">
      <a href="../index.html"> <img src="../img/logo.png" alt="Logo" style="height: 85px;" /></a>
    </div>

    <nav>
      <ul>
        <li><a href="../index.html">In√≠cio</a></li>
        <li><a href="../html/sobre.html">Sobre</a></li>
      <li><a href="#" id="abrirPerfilLink" onclick="abrirPerfil()"><i class="fa-solid fa-user"></i></a></li>

      </ul>
    </nav>
  </header>




  <h1>Vamos Respirar Juntos</h1>
  <div id="circulo"></div>
  <p id="textoRespiracao">Clique em "Iniciar" para come√ßar</p>

  <div class="botoes">
    <button id="btnIniciar">Iniciar</button>
    <button id="btnParar">Parar</button>
    <button class="voltar" onclick="window.location.href='../index.html'">Voltar ao Inicio</button>
<!-- Modal de Perfil -->
  <div id="modalPerfil" class="modal-perfil">
    <div class="modal-content">
      <button class="fechar-modal" onclick="fecharPerfil()">‚úñ</button>
      <h2>Meu Perfil üåô</h2>
      <p class="descricao-perfil">
        Aqui voc√™ pode acompanhar seu bem-estar e progresso emocional üíõ
      </p>
      <div class="perfil-opcoes">
        <button onclick="window.open('../html/perfil.html', '_blank')">üë§ Minha Conta [BETA]</button>
      
        <button onclick="window.open('../html/configuracoes.html', '_blank')">‚öôÔ∏è Configura√ß√µes</button>
         
        <button onclick="logout()">üö™ Sair da conta</button>
      </div>
    </div>
  </div>
  <script>
   const texto = document.getElementById("textoRespiracao"); 
const circulo = document.getElementById("circulo");
const btnIniciar = document.getElementById("btnIniciar");
const btnParar = document.getElementById("btnParar");
const btnVoltar = document.getElementById("btnVoltar");

const instrucoes = [
  { texto: "Inspire profundamente...", duracao: 4000 },
  { texto: "Segure...", duracao: 7000 },
  { texto: "Expire devagar...", duracao: 8000 }
];

let repeticoes = 3;
let estado = 0;
let cicloAtual = 0;
let timeout;

function mostrarFase() {
  // atualiza o texto imediatamente
  texto.textContent = instrucoes[estado].texto;
  texto.style.opacity = 1;

  // anima√ß√£o do fade-out no final da fase
  timeout = setTimeout(() => {
    texto.style.opacity = 0;

    // prepara pr√≥xima fase
    estado++;
    if (estado >= instrucoes.length) {
      estado = 0;
      cicloAtual++;
      if (cicloAtual >= repeticoes) {
        pararRespiracao();
        return;
      }
    }

    // chama a pr√≥xima fase ap√≥s o fade
    timeout = setTimeout(mostrarFase, 400); // 500ms de fade
  }, instrucoes[estado].duracao);
}

function iniciarRespiracao() {
  if (timeout) return;
  circulo.classList.add("animar");
  estado = 0;
  cicloAtual = 0;
  mostrarFase();
}

function pararRespiracao() {
  clearTimeout(timeout);
  timeout = null;
  estado = 0;
  cicloAtual = 0;
  circulo.classList.remove("animar");
  texto.textContent = 'Clique em "Iniciar" para come√ßar';
}

function voltarInicio() {
  pararRespiracao();
}

btnIniciar.addEventListener("click", iniciarRespiracao);
btnParar.addEventListener("click", pararRespiracao);
btnVoltar.addEventListener("click", voltarInicio);


// Aplica o modo noturno salvo ao carregar a p√°gina
if (localStorage.getItem("modoNoturno") === "ativo") {
  document.body.classList.add("dark-mode");
}

// Fun√ß√£o do bot√£o de modo noturno
function toggleDarkMode() {
  document.body.classList.toggle("dark-mode");
  if (document.body.classList.contains("dark-mode")) {
    localStorage.setItem("modoNoturno", "ativo");
  } else {
    localStorage.setItem("modoNoturno", "inativo");
  }
}
 

  </script>
  <script src="../js/script.js"></script>
</body>
</html>
